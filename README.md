# 🏥 건강보험 의약품 동의어 사전 자동화 시스템

> **대용량 의료 데이터 처리 및 자연어 처리 기술을 활용한 지능형 검색 시스템**

[![Python](https://img.shields.io/badge/Python-3.8+-blue.svg)](https://python.org)
[![Pandas](https://img.shields.io/badge/Pandas-2.0+-green.svg)](https://pandas.pydata.org)
[![License](https://img.shields.io/badge/License-Private-red.svg)](LICENSE)

## 📋 프로젝트 개요

요양급여 업무를 담당하는 심사과 간호사와 의료진의 업무 효율성 개선을 목표로 하는 **의약품 검색 동의어 사전 구축 시스템**입니다. 건강보험심사평가원의 고시 및 심사 데이터를 기반으로 49,000여 개의 의약품 데이터를 처리하여, OpenSearch용 동의어 규칙을 자동 생성합니다.

### 🎯 해결하고자 한 문제
- **검색 효율성**: 의료진이 다양한 용어로 검색할 때 관련 의약품을 놓치는 문제
- **업무 부담**: 심사 업무 중 의약품 검색에 소요되는 시간과 노력
- **데이터 활용**: 분산된 의약품 정보를 통합하여 검색 정확도 개선 필요
- **품질 문제**: 원천 데이터의 괄호 오류, 중복 등으로 인한 검색 오류

## 🚀 주요 기능

### ✅ 구현된 기능
- **다중 데이터 통합**: 3개 공식 데이터 파일의 통합 처리
- **텍스트 정제**: 괄호 오류, 중복 문자열 감지 및 수정 시도
- **성분별 그룹핑**: 동일 성분의 다양한 브랜드 제품들을 통합
- **한영 매핑**: 영문/한글 성분명 매핑 및 변형 패턴 생성
- **OpenSearch 연동**: Elasticsearch/OpenSearch 동의어 규칙 호환 형식 제공

## 📊 처리 결과

| 항목 | 수치 | 설명 |
|------|------|------|
| **매핑 성공률** | 99.3% | 49,557건 중 49,200건 처리 |
| **성분 그룹** | 1,409개 | 동일 성분 제품들의 그룹핑 결과 |
| **검색 키워드** | 평균 15개/성분 | 성분당 생성된 검색 경로 수 |
| **고유명사** | 3,169개 | 정제된 의약품 관련 용어 |

## 🛠 기술 스택

- **언어**: Python 3.8+
- **데이터 처리**: pandas, numpy
- **텍스트 처리**: 정규표현식, 자연어 처리
- **인코딩**: CP949, UTF-8 다국어 지원
- **데이터 구조**: defaultdict, set을 활용한 효율적 메모리 관리

## 📁 프로젝트 구조

```
pharmaLex_unity/
├── data/                              # 원천 데이터 파일
│   ├── 적용약가파일_8.28.수정.xlsx        # 건강보험 적용 의약품 (49,557건)
│   ├── 약제급여목록_공개용.xlsx           # ATC 코드 매핑 (21,953건)
│   └── [주성분 마스터 파일]              # 공식 주성분 데이터 (892건)
├── solution/                          # 최종 처리 결과
│   ├── final_perfect_fix.py           # 메인 처리 스크립트
│   └── developer_output_perfect/      # 최종 출력 파일들
│       ├── 1_고유명사사전_perfect.txt     # 의약품 고유명사 (3,169개)
│       ├── 2_주성분코드매핑_perfect.txt   # 코드-명칭 매핑 (2,389개)
│       ├── 3_성분한글영문_perfect.txt     # 한영 성분명 변형 (2,389개)
│       ├── 4_검색기용유의어사전_perfect.txt # 통합 검색 사전 (2,389개)
│       └── 5_주성분별약품그룹_perfect.txt  # 성분별 제품 그룹 (1,409개)
├── HISTORY.md                         # 상세 개발 보고서
└── README.md                          # 프로젝트 소개 (현재 파일)
```

## ⚡ 빠른 시작

### 1. 환경 설정
```bash
pip install pandas numpy openpyxl
```

### 2. 실행
```python
python solution/final_perfect_fix.py
```

### 3. 결과 확인
생성된 5개 파일을 `solution/developer_output_perfect/` 폴더에서 확인할 수 있습니다.

## 📖 사용법

### 입력 데이터 형식
- **적용약가 파일**: Excel 형식, 제품명/업체명/주성분코드 컬럼 필수
- **ATC 매핑**: CSV 형식, 국제 ATC 코드와 한국 의약품 매핑
- **주성분 마스터**: CSV 형식, 공식 한글 성분명 레퍼런스

### 출력 파일 활용

#### 1. 고유명사 사전
```
(주) 삼성제약
abacavir sulfate  
클로랄 하이드레이트
```

#### 2. 검색용 동의어 사전 (OpenSearch 적용)
```
지아겐정, 키벡사정, 트리멕정, abacavir sulfate
chloral hydrate, 클로랄 하이드레이트, 클로랄하이드레이트
```

## 🔧 핵심 알고리즘

### 텍스트 정제 엔진
```python
def fix_brackets_and_repetition(text: str) -> str:
    """
    불완전한 괄호와 반복 문자열을 지능적으로 수정
    - 괄호 오류: aldesleukin(rhIL-2, → aldesleukin
    - 중복 제거: selumetinib...selumetinib → selumetinib
    """
```

### 성분별 그룹핑
```python
def normalize_ingredient_for_grouping(ingredient: str) -> str:
    """
    동일 성분의 다양한 표기법을 표준화
    - 영문명 우선 정규화
    - 대소문자, 공백 통일
    """
```

## 🎨 기술적 특징

### 1. 견고한 데이터 처리
- **다국어 지원**: CP949, UTF-8 인코딩 자동 처리
- **메모리 효율성**: 49K+ 레코드 실시간 처리 최적화
- **오류 복구**: 불완전한 데이터 자동 복구 알고리즘

### 2. 의료 도메인 적용
- **용어 활용**: 의료진 사용 패턴 참고
- **기준 적용**: 건강보험심사평가원 공식 데이터 기준 준수
- **검색 고려**: 실제 업무에서의 검색 패턴 반영 노력

### 3. 확장성 고려
- **모듈화**: 각 처리 단계별 독립적 함수 구조
- **설정 가능**: 매개변수 조정을 통한 커스터마이징 시도
- **연동 가능**: 다른 시스템과의 연동 인터페이스 구조 제공

## 📈 성능 특징

- **처리 속도**: 49,557건 데이터를 약 3분 내 처리
- **메모리 효율**: defaultdict와 set을 활용한 자료구조 사용
- **처리 결과**: 99.3% 데이터 매핑 달성

## 🔮 개선 가능 영역

1. **실시간 업데이트**: 신규 의약품 데이터 반영 자동화 구현
2. **학습 기능**: 실제 검색 로그 분석을 통한 동의어 규칙 개선
3. **API 개발**: RESTful API를 통한 시스템 연동 기능 추가
4. **다국어 지원**: 추가 언어의 의료 용어 지원 확대

## 📊 기대 효과

### 업무 효율성 개선
- **검색 시간**: 의약품 검색 소요 시간 단축 기대
- **누락 감소**: 관련 의약품 검색 누락 위험 감소
- **자동화**: 수작업 매핑 작업의 자동화 효과

### 데이터 품질 개선
- **오류 처리**: 괄호 오류, 중복 항목 처리 시도
- **표준화**: 일관된 명명 규칙 적용 노력
- **데이터 활용**: 전체 데이터의 99.3% 처리 완료

## 👨‍💻 개발자 정보

**프로젝트 관리자**: Jimin  
**개발 기간**: 2025년 9월 1일  
**기술 스택**: Python, 자연어 처리, 대용량 데이터 처리  
**도메인**: 의료 정보학, 건강보험 시스템

---

> 💡 **프로젝트 특징**  
> 본 프로젝트는 **대용량 의료 데이터 처리**와 **자연어 처리** 기술을 활용하여, 실제 의료 현장에서 필요한 동의어 사전 구축을 시도한 프로젝트입니다. 건강보험심사평가원 공식 데이터를 기반으로 하여, 요양급여 업무 담당자들의 검색 효율성 개선에 기여하고자 했습니다.